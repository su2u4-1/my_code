from random import choices as ch

F = {
    "111111": ("01", "乾"),
    "000000": ("02", "坤"),
    "100010": ("03", "屯"),
    "010001": ("04", "蒙"),
    "111010": ("05", "需"),
    "010111": ("06", "訟"),
    "010000": ("07", "師"),
    "000010": ("08", "比"),
    "111011": ("09", "小畜"),
    "110111": ("10", "履"),
    "111000": ("11", "泰"),
    "000111": ("12", "否"),
    "101111": ("13", "同人"),
    "111101": ("14", "大有"),
    "001000": ("15", "謙"),
    "000100": ("16", "豫"),
    "100110": ("17", "隨"),
    "011001": ("18", "蠱"),
    "110000": ("19", "臨"),
    "000011": ("20", "觀"),
    "100101": ("21", "噬嗑"),
    "101001": ("22", "賁"),
    "000001": ("23", "剝"),
    "100000": ("24", "復"),
    "100111": ("25", "无妄"),
    "111001": ("26", "大畜"),
    "100001": ("27", "頤"),
    "011110": ("28", "大過"),
    "010010": ("29", "坎"),
    "101101": ("30", "離"),
    "001110": ("31", "咸"),
    "011100": ("32", "恆"),
    "001111": ("33", "遯"),
    "111100": ("34", "大壯"),
    "000101": ("35", "晉"),
    "101000": ("36", "明夷"),
    "101011": ("37", "家人"),
    "110101": ("38", "睽"),
    "001010": ("39", "蹇"),
    "010100": ("40", "解"),
    "110001": ("41", "損"),
    "100011": ("42", "益"),
    "111110": ("43", "夬"),
    "011111": ("44", "姤"),
    "000110": ("45", "萃"),
    "011000": ("46", "升"),
    "010110": ("47", "困"),
    "011010": ("48", "井"),
    "101110": ("49", "革"),
    "011101": ("50", "鼎"),
    "100100": ("51", "震"),
    "001001": ("52", "艮"),
    "001011": ("53", "漸"),
    "110100": ("54", "歸妹"),
    "101100": ("55", "豐"),
    "001101": ("56", "旅"),
    "011011": ("57", "巽"),
    "110110": ("58", "兌"),
    "010011": ("59", "渙"),
    "110010": ("60", "節"),
    "110011": ("61", "中孚"),
    "001100": ("62", "小過"),
    "101010": ("63", "既濟"),
    "010101": ("64", "未濟"),
}
URL1 = "https://zh.wikisource.org/zh-hant/周易/"
URL2 = "https://zhouyipro.com/gua"
URL3 = "https://www.eee-learning.com/book/neweee"
URL4 = "https://www.eee-learning.com/simple64/"


def divination(text: str):
    d = ""
    e = ""
    for _ in range(6):
        # 一變39,43
        a = ch((39, 43), (11, 36))[0]
        # 二變31,35,39
        if a == 39:
            a -= ch((3, 7), (10, 9))[0] + 1
        elif a == 43:
            a -= ch((3, 7), (11, 10))[0] + 1
        # 三變24,28,32,36
        if a == 31:
            a -= ch((3, 7), (8, 7))[0]
        elif a == 35:
            a -= ch((3, 7), (9, 8))[0]
        elif a == 39:
            a -= ch((3, 7), (10, 9))[0]
        d += str((a % 8) // 4)
        e += str(0 if a > 30 else 1)
    if len(text) < 1:
        s = ""
    else:
        s = f"占卜「{text}」"
    if d == e:
        return (
            s + f"占卜到了【{F[d][1]}】\n解釋:\n{URL2}{F[d][0]}.html\n{URL4}{F[d][0]}\n原文:\n{URL1}{F[d][1]}\n詳細解釋:\n{URL3}{F[d][0]}"
        )
    else:
        return (
            s
            + f"占卜到了【{F[d][1]}之{F[e][1]}】\n解釋:\n{URL2}{F[d][0]}-{F[e][0]}.html\n{URL4}{F[d][0]}\n{URL4}{F[e][0]}\n原文:\n{URL1}{F[d][1]}\n{URL1}{F[e][1]}\n詳細解釋:\n{URL3}{F[d][0]}\n{URL3}{F[e][0]}"
        )


while True:
    a = input("請輸入你要占卜的事件(輸入exit離開):")
    if a == "exit":
        break
    print(divination(a))
